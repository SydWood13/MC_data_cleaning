---
title: "CleaningTestScript"
author: "Sydney Wood"
date: "2024-06-17"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


## Load Packages 
```{r}
library(tidycode)
library(tibble)
library(dplyr)
library(tidyverse)
setwd("~/Documents/GitHub/MC_data_cleaning")
```


## Demographic Cleaning

```{r}
dem_data_raw <- read.csv(file = "Raw_dem_data_anon.csv")
dem_data_short <- dem_data_raw %>% select("anon_id", "consent", contains(".."))

colnames(dem_data_short) <- c("anon_id", "consent", "age", "year", "gender", "int_student", "esl", "e_exp", "e_lvl", "URM", "p_education", "m_education", "par_rel", "fin_support", "ses", "grant", "soc_med", "hw_time", "transfer")
```

## Change the categorical data to factors
```{r}
dem_data<- dem_data_short %>% mutate_at(c(4,5,6,7,10,13,15,16,19), factor)
```

## consent
```{r}
dem_data_clean <- dem_data %>%
  mutate(consent = case_when(
    grepl("I do not consent", consent, fixed = TRUE) ~ 0,
    grepl("I consent to participate", consent, fixed = TRUE) ~ 1,
    TRUE ~ 0))



dem_data_clean <- dem_data_clean %>%
  filter(consent == 1)
```

## there is a 2002 in age column.

## year
```{r}
dem_data_clean <- dem_data_clean %>%
  mutate(year = case_when(
    grepl("Freshman", year, fixed = TRUE) ~ 1,
    grepl("Sophomore", year, fixed = TRUE) ~ 2,
    grepl("Jonior", year, fixed = TRUE) ~ 3,
    grepl("Senior", year, fixed = TRUE) ~ 4,
    TRUE~NA
  ))
```

## Gender
```{r}
dem_data_clean <- dem_data_clean %>%
  mutate(gender = case_when(
    grepl("Woman", year, fixed = TRUE) ~ 'Woman',
    grepl("Man", year, fixed = TRUE) ~ 'Man',
    grepl("Non-binary or Gender queer", year, fixed = TRUE) ~ 3,
    grepl("Senior", year, fixed = TRUE) ~ 4,
    TRUE~NA
```

